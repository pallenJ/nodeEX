<!DOCTYPE html>

<html>

<head>

<title>Insert title here</title>

<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>

<script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

<script src="http://localhost:8801/socket.io/socket.io.js"></script>            //localhost에서 socket.io를 불러옵니다.

<style type="text/css">

 .text-wrap{width:300px;height: 300px; border: 1px solid #5e5e5e; overflow: auto;}

 .text-input{width:298px;}

</style>

</head>

<body>

 <div class="text-wrap"></div>

 <input type="text" class="text-input" />

</body>

<script>

var name = prompt("input your ID");                              //아이디를 입력받습니다.

 

$(function(){

  var socket = io.connect('http://localhost:8801');          //localhost에 연결합니다.

  socket.on('conn', function(data){                              //연결이 되었다면, 메세지를 받아옵니다.

   console.log(data);

  });

  

  $('.text-input').bind('keypress', function(e){

   if(e.keyCode == 13){

    var text = $('.text-input').val();

    socket.emit('message', name+' : '+ text);              //input창에서 엔터를 누를때 message 키로 문자를 전송합니다. 

    $('.text-input').val('');

   }

  });

 

  socket.on('message', function(data){                    //server에서 보낸 message 키의 값을 받아오고 html에 추가합니다.

   $('.text-wrap').append('<div>'+data+'</div>');

  });

 });

 

</script>

</html>